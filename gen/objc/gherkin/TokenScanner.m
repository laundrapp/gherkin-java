//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/marcussmith/HambroPerks/laundrapp_org/gherkin-java/src/main/java/gherkin/TokenScanner.java
//

#include "J2ObjC_source.h"
#include "gherkin/GherkinLine.h"
#include "gherkin/Token.h"
#include "gherkin/TokenScanner.h"
#include "gherkin/ast/Location.h"
#include "java/io/BufferedReader.h"
#include "java/io/IOException.h"
#include "java/io/Reader.h"
#include "java/io/StringReader.h"
#include "java/lang/RuntimeException.h"

@interface GherkinTokenScanner () {
 @public
  JavaIoBufferedReader *reader_;
  jint lineNumber_;
}

@end

J2OBJC_FIELD_SETTER(GherkinTokenScanner, reader_, JavaIoBufferedReader *)

@implementation GherkinTokenScanner

- (instancetype)initWithNSString:(NSString *)source {
  GherkinTokenScanner_initWithNSString_(self, source);
  return self;
}

- (instancetype)initWithJavaIoReader:(JavaIoReader *)source {
  GherkinTokenScanner_initWithJavaIoReader_(self, source);
  return self;
}

- (GherkinToken *)read {
  @try {
    NSString *line = [((JavaIoBufferedReader *) nil_chk(reader_)) readLine];
    GherkinAstLocation *location = create_GherkinAstLocation_initWithInt_withInt_(++lineNumber_, 0);
    return line == nil ? create_GherkinToken_initWithGherkinIGherkinLine_withGherkinAstLocation_(nil, location) : create_GherkinToken_initWithGherkinIGherkinLine_withGherkinAstLocation_(create_GherkinGherkinLine_initWithNSString_(line), location);
  }
  @catch (JavaIoIOException *e) {
    @throw create_JavaLangRuntimeException_initWithJavaLangThrowable_(e);
  }
}

- (void)dealloc {
  RELEASE_(reader_);
  [super dealloc];
}

@end

void GherkinTokenScanner_initWithNSString_(GherkinTokenScanner *self, NSString *source) {
  GherkinTokenScanner_initWithJavaIoReader_(self, create_JavaIoStringReader_initWithNSString_(source));
}

GherkinTokenScanner *new_GherkinTokenScanner_initWithNSString_(NSString *source) {
  J2OBJC_NEW_IMPL(GherkinTokenScanner, initWithNSString_, source)
}

GherkinTokenScanner *create_GherkinTokenScanner_initWithNSString_(NSString *source) {
  J2OBJC_CREATE_IMPL(GherkinTokenScanner, initWithNSString_, source)
}

void GherkinTokenScanner_initWithJavaIoReader_(GherkinTokenScanner *self, JavaIoReader *source) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->reader_, new_JavaIoBufferedReader_initWithJavaIoReader_(source));
}

GherkinTokenScanner *new_GherkinTokenScanner_initWithJavaIoReader_(JavaIoReader *source) {
  J2OBJC_NEW_IMPL(GherkinTokenScanner, initWithJavaIoReader_, source)
}

GherkinTokenScanner *create_GherkinTokenScanner_initWithJavaIoReader_(JavaIoReader *source) {
  J2OBJC_CREATE_IMPL(GherkinTokenScanner, initWithJavaIoReader_, source)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GherkinTokenScanner)
