//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/nbransby/Documents/gherkin-java/src/main/java/gherkin/TokenScanner.java
//

#include "J2ObjC_source.h"
#include "gherkin/GherkinLine.h"
#include "gherkin/Token.h"
#include "gherkin/TokenScanner.h"
#include "gherkin/ast/Location.h"
#include "java/io/BufferedReader.h"
#include "java/io/IOException.h"
#include "java/io/Reader.h"
#include "java/io/StringReader.h"
#include "java/lang/RuntimeException.h"

@interface GHKTokenScanner () {
 @public
  JavaIoBufferedReader *reader_;
  jint lineNumber_;
}

@end

J2OBJC_FIELD_SETTER(GHKTokenScanner, reader_, JavaIoBufferedReader *)

@implementation GHKTokenScanner

- (instancetype __nonnull)initWithNSString:(NSString *)source {
  GHKTokenScanner_initWithNSString_(self, source);
  return self;
}

- (instancetype __nonnull)initWithJavaIoReader:(JavaIoReader *)source {
  GHKTokenScanner_initWithJavaIoReader_(self, source);
  return self;
}

- (GHKToken *)read {
  @try {
    NSString *line = [((JavaIoBufferedReader *) nil_chk(reader_)) readLine];
    GHKALocation *location = create_GHKALocation_initWithInt_withInt_(++lineNumber_, 0);
    return line == nil ? create_GHKToken_initWithGHKIGherkinLine_withGHKALocation_(nil, location) : create_GHKToken_initWithGHKIGherkinLine_withGHKALocation_(create_GHKGherkinLine_initWithNSString_(line), location);
  }
  @catch (JavaIoIOException *e) {
    @throw create_JavaLangRuntimeException_initWithJavaLangThrowable_(e);
  }
}

- (void)dealloc {
  RELEASE_(reader_);
  [super dealloc];
}

@end

void GHKTokenScanner_initWithNSString_(GHKTokenScanner *self, NSString *source) {
  GHKTokenScanner_initWithJavaIoReader_(self, create_JavaIoStringReader_initWithNSString_(source));
}

GHKTokenScanner *new_GHKTokenScanner_initWithNSString_(NSString *source) {
  J2OBJC_NEW_IMPL(GHKTokenScanner, initWithNSString_, source)
}

GHKTokenScanner *create_GHKTokenScanner_initWithNSString_(NSString *source) {
  J2OBJC_CREATE_IMPL(GHKTokenScanner, initWithNSString_, source)
}

void GHKTokenScanner_initWithJavaIoReader_(GHKTokenScanner *self, JavaIoReader *source) {
  NSObject_init(self);
  JreStrongAssignAndConsume(&self->reader_, new_JavaIoBufferedReader_initWithJavaIoReader_(source));
}

GHKTokenScanner *new_GHKTokenScanner_initWithJavaIoReader_(JavaIoReader *source) {
  J2OBJC_NEW_IMPL(GHKTokenScanner, initWithJavaIoReader_, source)
}

GHKTokenScanner *create_GHKTokenScanner_initWithJavaIoReader_(JavaIoReader *source) {
  J2OBJC_CREATE_IMPL(GHKTokenScanner, initWithJavaIoReader_, source)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GHKTokenScanner)
