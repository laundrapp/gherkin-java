//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Salton/Documents/Projects/gherkin/gherkin-java/src/main/java/gherkin/GherkinDialectProvider.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "com/google/gson/Gson.h"
#include "gherkin/GherkinDialect.h"
#include "gherkin/GherkinDialectProvider.h"
#include "gherkin/ParserException.h"
#include "gherkin/ast/Location.h"
#include "java/io/InputStream.h"
#include "java/io/InputStreamReader.h"
#include "java/io/Reader.h"
#include "java/io/UnsupportedEncodingException.h"
#include "java/lang/RuntimeException.h"
#include "java/util/ArrayList.h"
#include "java/util/Collections.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"

@interface GherkinGherkinDialectProvider () {
 @public
  NSString *default_dialect_name_;
}

@end

J2OBJC_FIELD_SETTER(GherkinGherkinDialectProvider, default_dialect_name_, NSString *)

inline id<JavaUtilMap> GherkinGherkinDialectProvider_get_DIALECTS(void);
inline id<JavaUtilMap> GherkinGherkinDialectProvider_set_DIALECTS(id<JavaUtilMap> value);
static id<JavaUtilMap> GherkinGherkinDialectProvider_DIALECTS;
J2OBJC_STATIC_FIELD_OBJ(GherkinGherkinDialectProvider, DIALECTS, id<JavaUtilMap>)

J2OBJC_INITIALIZED_DEFN(GherkinGherkinDialectProvider)

@implementation GherkinGherkinDialectProvider

- (instancetype __nonnull)initWithNSString:(NSString *)default_dialect_name {
  GherkinGherkinDialectProvider_initWithNSString_(self, default_dialect_name);
  return self;
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype __nonnull)init {
  GherkinGherkinDialectProvider_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (GherkinGherkinDialect *)getDefaultDialect {
  return [self getDialectWithNSString:default_dialect_name_ withGherkinAstLocation:nil];
}

- (GherkinGherkinDialect *)getDialectWithNSString:(NSString *)language
                           withGherkinAstLocation:(GherkinAstLocation *)location {
  id<JavaUtilMap> map = [((id<JavaUtilMap>) nil_chk(GherkinGherkinDialectProvider_DIALECTS)) getWithId:language];
  if (map == nil) {
    @throw create_GherkinParserException_NoSuchLanguageException_initWithNSString_withGherkinAstLocation_(language, location);
  }
  return create_GherkinGherkinDialect_initWithNSString_withJavaUtilMap_(language, map);
}

- (id<JavaUtilList>)getLanguages {
  id<JavaUtilList> languages = create_JavaUtilArrayList_initWithJavaUtilCollection_([((id<JavaUtilMap>) nil_chk(GherkinGherkinDialectProvider_DIALECTS)) keySet]);
  JavaUtilCollections_sortWithJavaUtilList_(languages);
  return JavaUtilCollections_unmodifiableListWithJavaUtilList_(languages);
}

- (void)dealloc {
  RELEASE_(default_dialect_name_);
  [super dealloc];
}

+ (void)initialize {
  if (self == [GherkinGherkinDialectProvider class]) {
    {
      ComGoogleGsonGson *gson = create_ComGoogleGsonGson_init();
      @try {
        JavaIoReader *dialects = create_JavaIoInputStreamReader_initWithJavaIoInputStream_withNSString_([GherkinGherkinDialectProvider_class_() getResourceAsStream:@"/gherkin/gherkin-languages.json"], @"UTF-8");
        JreStrongAssign(&GherkinGherkinDialectProvider_DIALECTS, [gson fromJsonWithJavaIoReader:dialects withIOSClass:JavaUtilMap_class_()]);
      }
      @catch (JavaIoUnsupportedEncodingException *e) {
        @throw create_JavaLangRuntimeException_initWithJavaLangThrowable_(e);
      }
    }
    J2OBJC_SET_INITIALIZED(GherkinGherkinDialectProvider)
  }
}

@end

void GherkinGherkinDialectProvider_initWithNSString_(GherkinGherkinDialectProvider *self, NSString *default_dialect_name) {
  NSObject_init(self);
  JreStrongAssign(&self->default_dialect_name_, default_dialect_name);
}

GherkinGherkinDialectProvider *new_GherkinGherkinDialectProvider_initWithNSString_(NSString *default_dialect_name) {
  J2OBJC_NEW_IMPL(GherkinGherkinDialectProvider, initWithNSString_, default_dialect_name)
}

GherkinGherkinDialectProvider *create_GherkinGherkinDialectProvider_initWithNSString_(NSString *default_dialect_name) {
  J2OBJC_CREATE_IMPL(GherkinGherkinDialectProvider, initWithNSString_, default_dialect_name)
}

void GherkinGherkinDialectProvider_init(GherkinGherkinDialectProvider *self) {
  GherkinGherkinDialectProvider_initWithNSString_(self, @"en");
}

GherkinGherkinDialectProvider *new_GherkinGherkinDialectProvider_init() {
  J2OBJC_NEW_IMPL(GherkinGherkinDialectProvider, init)
}

GherkinGherkinDialectProvider *create_GherkinGherkinDialectProvider_init() {
  J2OBJC_CREATE_IMPL(GherkinGherkinDialectProvider, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(GherkinGherkinDialectProvider)
